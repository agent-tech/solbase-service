// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model PaymentIntent {
  id                    String   @id @default(uuid())
  intent_id             String   @unique
  payer_chain           String   // 'solana' | 'solana-devnet'
  target_chain          String   // 'base' | 'base-sepolia'
  payer_wallet          String?  // Solana wallet address (optional until first payment)
  merchant_recipient    String   // Base address to pay to
  amount                String   // USD amount (e.g., "0.01")

  // Solana proofs
  sol_commit_receipt    String?
  sol_settle_proof      String?
  sol_tx_hash           String?

  // Base proofs
  base_commit_receipt   String?
  base_settle_proof     String?
  base_tx_hash          String?

  // Status tracking
  status                String   // PENDING, SOL_SETTLED, BASE_SETTLING, BASE_SETTLED, COMPLETED, EXPIRED

  // Timestamps
  created_at            DateTime @default(now())
  expires_at            DateTime
  sol_settled_at        DateTime?
  base_settled_at       DateTime?
  completed_at          DateTime?
}
